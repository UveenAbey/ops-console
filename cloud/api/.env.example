# xSPECTRE Ops Console - Environment Configuration
# Copy this file to .env and update with your values

# ======================
# Database Configuration
# ======================
DATABASE_URL=postgresql://xspectre:YOUR_PASSWORD_HERE@localhost:5432/xspectre_ops

# ======================
# Redis (Optional)
# ======================
REDIS_URL=redis://localhost:6379

# ======================
# JWT & Security
# ======================
# Generate a strong random secret: openssl rand -hex 32
JWT_SECRET=GENERATE_RANDOM_SECRET_HERE
SESSION_TIMEOUT_MINUTES=30
MAX_LOGIN_ATTEMPTS=5

# ======================
# WireGuard Configuration
# ======================
WIREGUARD_INTERFACE=wg0
WIREGUARD_SUBNET=10.10.0.0/24
WIREGUARD_SERVER_IP=10.10.0.1
# Get from: cat /etc/wireguard/server.pub
WIREGUARD_PUBLIC_KEY=YOUR_SERVER_PUBLIC_KEY_HERE

# ======================
# Cloud Server Details
# ======================
# Your cloud server's public IP (for device enrollment)
CLOUD_PUBLIC_IP=YOUR_PUBLIC_IP_HERE
# Your domain (or use IP)
CLOUD_DOMAIN=ops.xspectre.internal

# ======================
# API Configuration
# ======================
PORT=3000
NODE_ENV=production
LOG_LEVEL=info

# ======================
# CORS (for frontend)
# ======================
CORS_ORIGIN=https://ops.xspectre.internal

# ======================
# BetterStack Integration
# ======================
# Get webhook URL from BetterStack dashboard
BETTERSTACK_WEBHOOK_URL=https://uptime.betterstack.com/api/v1/...
BETTERSTACK_API_KEY=YOUR_API_KEY_HERE

# ======================
# Backup Storage
# ======================
BACKUP_STORAGE_PATH=/var/backups/xspectre
# ZFS pool (if using ZFS)
ZFS_POOL_NAME=backup-pool

# ======================
# Email (Optional - for alerts)
# ======================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=alerts@xspectre.com
SMTP_PASSWORD=YOUR_EMAIL_PASSWORD
EMAIL_FROM=xSPECTRE Ops <noreply@xspectre.com>

# ======================
# Admin User (for seeding)
# ======================
# If not set, a random password will be generated
ADMIN_PASSWORD=CHANGE_THIS_ON_FIRST_LOGIN

# ======================
# Feature Flags
# ======================
ENABLE_SSO=false
ENABLE_2FA=true
ENABLE_AUDIT_LOG=true
ENABLE_WEBSOCKET_UPDATES=true

# ======================
# Performance Tuning
# ======================
DATABASE_POOL_MAX=20
DATABASE_POOL_IDLE_TIMEOUT=30000
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ======================
# Monitoring & Telemetry
# ======================
# How often devices send heartbeats (seconds)
HEARTBEAT_INTERVAL=60
# When to consider device offline (minutes)
DEVICE_OFFLINE_THRESHOLD=3
# Metrics retention (days)
METRICS_RETENTION_DAYS=90

# ======================
# Development Only
# ======================
# Set to true to enable debug logging and stack traces
DEBUG=false
